<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>–í—Ö–æ–¥ ‚Äì J4Teen</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>

<nav class="topbar">
  <div class="logo">J4Teen</div>
</nav>

<header class="hero small">
  <div class="hero-content">
    <h1>–í—Ö–æ–¥ / –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</h1>
    <p>–í–ª–µ–∑ –≤ –ø—Ä–æ—Ñ–∏–ª–∞ —Å–∏, –∑–∞ –¥–∞ –ø—É–±–ª–∏–∫—É–≤–∞—à –∏ —á–∞—Ç–∏—à</p>
  </div>
</header>

<main class="container">

  <div style="
    max-width:420px;
    margin:0 auto;
    background:#fff;
    padding:28px;
    border-radius:24px;
    box-shadow:0 12px 32px rgba(0,0,0,0.15);
  ">

    <input id="email" type="email" placeholder="–ò–º–µ–π–ª"
      style="width:100%;padding:14px;border-radius:14px;border:2px solid #e5edff;margin-bottom:12px;" />

    <input id="password" type="password" placeholder="–ü–∞—Ä–æ–ª–∞"
      style="width:100%;padding:14px;border-radius:14px;border:2px solid #e5edff;margin-bottom:18px;" />

    <button id="login-btn"
      style="width:100%;padding:14px;border-radius:999px;background:#2563eb;color:white;font-weight:800;border:none;margin-bottom:10px;">
      –í—Ö–æ–¥
    </button>

    <button id="register-btn"
      style="width:100%;padding:14px;border-radius:999px;background:#f59e0b;color:#111;font-weight:800;border:none;">
      –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
    </button>

    <p id="auth-msg" style="margin-top:16px;color:#c00;text-align:center;"></p>

  </div>

</main>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>

<script>
  const SUPABASE_URL = "https://aujswymolniwtdxyangf.supabase.co";
  const SUPABASE_KEY = "sb_publishable_UNykLLkp5Jzb9TQlq-qijg_U94miJxS";

  const supabase = window.supabase.createClient(
    SUPABASE_URL,
    SUPABASE_KEY
  );

  const msg = document.getElementById("auth-msg");

  // üîí –∞–∫–æ –≤–µ—á–µ –µ –ª–æ–≥–Ω–∞—Ç ‚Üí –¥–∏—Ä–µ–∫—Ç–Ω–æ –≤ —Å–∞–π—Ç–∞
  (async () => {
    const { data } = await supabase.auth.getUser();
    if (data.user) {
      window.location.href = "index.html";
    }
  })();

  document.getElementById("login-btn").addEventListener("click", async () => {
    msg.textContent = "";

    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value.trim();

    const { error } = await supabase.auth.signInWithPassword({
      email,
      password
    });

    if (error) {
      msg.textContent = error.message;
    } else {
      window.location.href = "index.html";
    }
  });

  document.getElementById("register-btn").addEventListener("click", async () => {
    msg.textContent = "";

    const email = document.getElementById("email").value.trim();
    const password = document.getElementById("password").value.trim();

    const { error } = await supabase.auth.signUp({
      email,
      password
    });

    if (error) {
      msg.textContent = error.message;
    } else {
      msg.style.color = "green";
      msg.textContent = "–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è—Ç–∞ –µ —É—Å–ø–µ—à–Ω–∞. –í–ª–µ–∑ —Å–µ–≥–∞.";
    }
  });
</script>

</body>
</html>
