<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title data-key="chatPageTitle">Чат – J4Teen</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<nav class="topbar">
  <div class="logo">J4Teen</div>

  <button id="lang-toggle" type="button">EN</button>

  <div class="burger">☰</div>

  <div class="menu">
    <a href="index.html" data-key="home">Начало</a>
    <a href="jobs.html" data-key="jobs">Обяви</a>
    <a href="categories.html" data-key="categories">Категории</a>
    <a href="news.html" data-key="newsMenu">Новини</a>
    <a href="pricing.html" data-key="plans">Планове</a>
    <a href="post.html" data-key="post">Публикувай</a>
    <a href="chat.html" data-key="chat">Чат</a>
  </div>
</nav>

<header class="hero small">
  <div class="hero-content">
    <h1 data-key="chatTitle">Чат</h1>
    <p data-key="chatSubtitle">Свържи се директно</p>
  </div>
</header>

<main class="container">

  <!-- CHAT BOX -->
  <div id="chat-box" style="
    max-width:700px;
    margin:20px auto;
    padding:16px;
    background:#ffffff;
    border-radius:16px;
    box-shadow:0 6px 20px rgba(0,0,0,0.08);
  "></div>

  <!-- CHAT FORM -->
  <form id="chat-form" style="
    max-width:700px;
    margin:16px auto;
    display:flex;
    gap:10px;
    flex-wrap:wrap;
  ">
    <input
      id="chat-name"
      data-key-placeholder="chatNamePh"
      placeholder="Име"
      required
      style="flex:1; min-width:140px;"
    >

    <input
      id="chat-message"
      data-key-placeholder="chatMsgPh"
      placeholder="Съобщение"
      required
      style="flex:3; min-width:200px;"
    >

    <button type="submit" data-key="chatSend" style="min-width:120px;">
      Изпрати
    </button>
  </form>

</main>

<script src="main.js"></script>

<script>
  const chatBox = document.getElementById("chat-box");
  const chatForm = document.getElementById("chat-form");

  function renderChat() {
    const messages = JSON.parse(localStorage.getItem("chat") || "[]");
    chatBox.innerHTML = "";

    messages.forEach(msg => {
      const div = document.createElement("div");
      div.style.padding = "10px 14px";
      div.style.marginBottom = "8px";
      div.style.borderRadius = "12px";
      div.style.background = "#f1f5f9";

      div.innerHTML = `<strong>${msg.name}</strong><br>${msg.text}`;
      chatBox.appendChild(div);
    });

    chatBox.scrollTop = chatBox.scrollHeight;
  }

  renderChat();

  chatForm.addEventListener("submit", function(e) {
    e.preventDefault();

    const name = document.getElementById("chat-name").value;
    const text = document.getElementById("chat-message").value;

    const messages = JSON.parse(localStorage.getItem("chat") || "[]");
    messages.push({ name, text });

    localStorage.setItem("chat", JSON.stringify(messages));

    chatForm.reset();
    renderChat();
  });
</script>

</body>
</html>
